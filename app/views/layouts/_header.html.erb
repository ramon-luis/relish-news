<header class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom border-dark">


  <a class="navbar-brand logo" href="/"><%= image_tag("newspaper_black.png") %>Headlines</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse justify-content-between" id="navbarSupportedContent">

    <ul class="navbar-nav">
      <li class="nav-item"><a class="nav-link" href="/topics/top-news">Top News</a></li>
      <li class="nav-item"><a class="nav-link" href="/topics/business">Business</a></li>
      <li class="nav-item"><a class="nav-link" href="/topics/sports">Sports</a></li>
      <li class="nav-item"><a class="nav-link" href="/topics/tech">Tech</a></li>
      <li class="dropdown">
        <button class="btn btn-sm btn-secondary dropdown-toggle" type="button" id="dropdownTopicButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          More
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownTopicButton">
          <% NewsApi::STANDARD_TOPICS.each do |topic, topic_hash| %>
            <% if !NewsApi::HEADER_TOPICS.include? topic_hash[:name] %>
              <% topic_route = topic_hash[:route] %>
              <% topic_name = topic_hash[:name] %>
              <%= link_to("#{topic_name}", "/topics/#{topic_route}" , class: "dropdown-item") %>
            <% end %>
          <% end %>
        </div>
      </li>
    </ul>

    <%= form_tag("/search", method: :get, enforce_utf8: false, class: "form-inline search-bar") do %>
      <%= text_field_tag :q, nil, class: "form-control", size: 30, placeholder: "search...", autocomplete: :off %>
      <%= button_to "Search", search_path, class: "btn btn-secondary", method: :get %>
    <% end %>

    <ul class="nav navbar-nav navbar-right">
      <% if session[:user_id] != nil %>
        <% user = User.find_by(id: session[:user_id]) %>
        <li><a class="nav-link navbar-text text-success" href="/favorites">Favorites</a></li>
        <li><a class="nav-link navbar-text" href="/account">| Account |</a></li>
        <li><a class="nav-link navbar-text" href="/logout">Logout</a></li>
      <% else %>
        <li class="nav-item"><a class="nav-link" href="/signup">Sign Up</a></li>
        <li class="divider"></li>
        <li class="nav-item"><a class="nav-link" href="/login">Login</a></li>
      <% end %>
    </ul>

  </div>

</header>


